{"ast":null,"code":"'use strict';\n\nvar XHR = require('xmlhttprequest').XMLHttpRequest;\n/**\n * Make a network request.\n * @param {String} method - HTTP method to use. e.g: GET, POST.\n * @param {RequestParams} params\n * @returns {Promise<String>} responseText\n*/\n\n/**\n* @typedef {Object} RequestParams\n* @property {String} url - URL to access.\n* @property {Object} [headers] - An unformatted map of headers.\n* @property {Object} [body] - An unformatted map representing\n*   post body.\n* @property {Boolean} [withCredentials=false] - Whether to set the\n*   XHR withCredentials flag.\n*/\n\n\nfunction request(method, params) {\n  return new Promise(function (resolve, reject) {\n    if (typeof method !== 'string' || !params) {\n      throw new Error('<String>method and <Object>params are required args.');\n    }\n\n    var xhr = new XHR();\n    xhr.open(method.toUpperCase(), params.url, true);\n    xhr.withCredentials = !!params.withCredentials;\n\n    xhr.onreadystatechange = function onreadystatechange() {\n      if (xhr.readyState !== 4) {\n        return;\n      }\n\n      if (200 <= xhr.status && xhr.status < 300) {\n        resolve(xhr.responseText);\n      } else {\n        reject(xhr.responseText);\n      }\n    };\n\n    for (var headerName in params.headers) {\n      xhr.setRequestHeader(headerName, params.headers[headerName]);\n    }\n\n    xhr.send(params.body);\n  });\n}\n\nrequest.get = request.bind(null, 'GET');\nrequest.post = request.bind(null, 'POST');\nmodule.exports = request;","map":null,"metadata":{},"sourceType":"script"}